<?xml version="1.0" encoding="UTF-8" standalone="no"?><templates><template autoinsert="true" context="org.eclipse.datatools.sqltools.editor.template.sql.generic" deleted="false" description="add column if not exists" enabled="true" name="safe_add_column">DECLARE&#13;
  v_column_exists number := 0;  &#13;
BEGIN&#13;
  SELECT count(*) into v_column_exists&#13;
    FROM user_tab_cols&#13;
    WHERE column_name = '${new_column}'&#13;
      AND table_name = '${table_name}';&#13;
&#13;
  IF (v_column_exists = 0) THEN&#13;
      execute immediate 'ALTER TABLE ${table_name} ADD ${new_column} ${data_type}';&#13;
  END if;&#13;
END;&#13;
/</template><template autoinsert="true" context="org.eclipse.datatools.sqltools.editor.template.sql.generic" deleted="false" description="add constraint foreign key if not exists" enabled="true" name="safe_add_constraint_FK">DECLARE &#13;
  v_constraint_exists number := 0;&#13;
BEGIN&#13;
  SELECT count(*) INTO v_constraint_exists&#13;
  FROM all_constraints&#13;
  WHERE constraint_name = 'FK_${column_name}';&#13;
&#13;
  IF v_constraint_exists = 0 THEN&#13;
    EXECUTE IMMEDIATE 'ALTER TABLE ${table_name} ADD CONSTRAINT&#13;
      FK_${column_name} FOREIGN KEY (${column_name})&#13;
      REFERENCES ${table_name_referenced} (${column_name_referenced})';&#13;
  END IF;&#13;
&#13;
END;&#13;
/&#13;
</template><template autoinsert="true" context="org.eclipse.datatools.sqltools.editor.template.sql.generic" deleted="false" description="create table if not exsists" enabled="true" name="safe_create_table">DECLARE&#13;
  v_table_exists number := 0;  &#13;
BEGIN      &#13;
  SELECT count(*) INTO v_table_exists&#13;
  	FROM all_objects&#13;
	WHERE object_type IN ('TABLE','VIEW')&#13;
	AND object_name = '${new_table}';&#13;
	&#13;
  IF (v_table_exists = 0) THEN&#13;
      execute immediate 'CREATE TABLE ${new_table} (ID NUMBER NOT NULL)';&#13;
  END if;&#13;
END;&#13;
/</template><template autoinsert="true" context="org.eclipse.datatools.sqltools.editor.template.sql.generic" deleted="false" description="Supprime un index si il existe" enabled="true" name="safe_delete_index">DECLARE&#13;
  v_count_indexes INTEGER;&#13;
BEGIN&#13;
  SELECT count(*) INTO v_count_indexes&#13;
    FROM USER_INDEXES&#13;
    WHERE INDEX_NAME = '${index}';&#13;
&#13;
  IF v_count_indexes &gt; 0 THEN&#13;
    EXECUTE IMMEDIATE 'DROP INDEX ${index}';&#13;
  END IF;&#13;
END;&#13;
/</template><template autoinsert="true" context="org.eclipse.datatools.sqltools.editor.template.sql.generic" deleted="false" description="Permet de supprimer une procedure, un package, ... si il existe" enabled="true" name="safe_drop_something">DECLARE&#13;
  v_count_something INTEGER;&#13;
BEGIN&#13;
  SELECT count(*) INTO v_count_something&#13;
    FROM user_objects&#13;
    WHERE object_type IN ( 'PROCEDURE', 'FUNCTION','PACKAGE', 'PACKAGE BODY' )&#13;
    AND object_name = '${something}';&#13;
&#13;
  IF v_count_something &gt; 0 THEN&#13;
    EXECUTE IMMEDIATE 'DROP PROCEDURE ${something}';&#13;
  END IF;&#13;
END;&#13;
/</template><template autoinsert="true" context="org.eclipse.datatools.sqltools.editor.template.sql.generic" deleted="false" description="insert if not exists" enabled="true" name="safe_insert">INSERT INTO ${table_name} (${col_id}, ${col1})&#13;
    SELECT ${id}, ${val1} FROM dual&#13;
    WHERE NOT EXISTS (SELECT 1 FROM ${table_name}&#13;
    WHERE ${col_id} = ${id} );</template></templates>